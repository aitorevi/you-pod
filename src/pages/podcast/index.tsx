import Head from 'next/head'
import {Inter} from 'next/font/google'
import Nav from '../../../components/navbar'
import SmallWithNavigation from '../../../components/footer'
import React from "react";
import {MyPlayer} from "../../../components/my_player";
import {Box} from "@chakra-ui/react";

import { useEffect, useState } from "react";
import { collection, getDocs } from "firebase/firestore";
import { db } from "../../../firebase/firebase";

const inter = Inter({subsets: ['latin']})
// export default function Podcast() {
export default function Podcast() {
    interface PodcastData {
        url: string;
        description: string;
        title: string;
    }

    const [podcastCollection, setPodcastCollection] = useState<PodcastData[]>([]);

    useEffect(() => {
        const fetchData = async () => {
            const dataCollection = collection(db, "podcast");
            const dataSnapshot = await getDocs(dataCollection);
            const podcastData = dataSnapshot.docs.map((doc) => doc.data() as PodcastData);
            setPodcastCollection(podcastData);
            //podcastData.forEach((podcast) => console.log(podcast.title));
        };
        fetchData().then(r => {});
    }, []);

    return (
        <>
            <Head>
                <title>Podcast</title>
                <meta name="description" content="Generated by create next app"/>
                <meta name="viewport" content="width=device-width, initial-scale=1"/>
                <link rel="icon" href="/favicon.ico"/>
            </Head>
            <Nav/>
            <Box
                minH={'100vh'}>
                {/*<MyPlayer*/}
                {/*    url={"https://www.carlosble.com/downloads/podcasts/e50.mp3"}*/}
                {/*    title={"E50: ¿Cómo nos va a cambiar la inteligencia artificial?"}*/}
                {/*    description={"Te comparto mis reflexiones sobre el futuro utópico o distópico que supone la IA para la humanidad. Te hablo de un episodio del podcast Your Undivided Attention, llamado The AI Dilemma, que me ha dado mucho que pensar, así como de otros podcasts y experiencias propias. La inteligencia artificial va a suponer un cambio mayor que la revolución industrial, y en menor tiempo."}*/}
                {/*/>*/}
                {/*<MyPlayer*/}
                {/*    url={"https://www.carlosble.com/downloads/podcasts/e48.mp3"}*/}
                {/*    title={"E48: Tres pilares de la profesionalidad, con Roberto Canales"}*/}
                {/*    description={"Converso con Roberto Canales, CEO y co-fundador de Autentia, profesor en el IE, autor de múltiples libros. Roberto se define como eterno aprendiz. En esta conversación hablamos de los tres pilares: habilidades técnicas, no técnicas y valor entregado y percibido por el cliente. En la última parte de la conversación, también hablamos de la IA, cómo no."}*/}
                {/*/>*/}
                {podcastCollection.map((podcast) => {
                    return (
                        <MyPlayer key={podcast.title.toString()} url={podcast.url} title={podcast.title} description={podcast.description}></MyPlayer>
                    )
                })}

            </Box>
            {/*{[1, 2].map((p) => {*/}
            {/*    return (*/}
            {/*        <MyPlayer key={p.toString()} url={"h"} title={"h"} description={"h"}></MyPlayer>*/}
            {/*    )*/}
            {/*})}*/}
            <footer>
                <SmallWithNavigation/>
            </footer>
        </>
    )
}